@model APP.Models.Fruta

@{
    var proveedores = ViewBag.Proveedores as List<APP.Models.Proveedor> ?? new List<APP.Models.Proveedor>();
}

<div class="container mt-5">
    <h2 class="mb-4">Añadir Fruta</h2>

    <form asp-action="Create" method="post">
        <div class="row g-3">

            <!-- Nombre -->
            <div class="col-md-6">
                <label asp-for="Nombre" class="form-label">Nombre</label>
                <input asp-for="Nombre" class="form-control" required />
                <span asp-validation-for="Nombre" class="text-danger"></span>
            </div>

            <!-- Tipo -->
            <div class="col-md-6">
                <label asp-for="Tipo" class="form-label">Tipo</label>
                <input asp-for="Tipo" class="form-control" required />
                <span asp-validation-for="Tipo" class="text-danger"></span>
            </div>

            <!-- Color -->
            <div class="col-md-4">
                <label asp-for="Color" class="form-label">Color</label>
                <input asp-for="Color" class="form-control" required />
                <span asp-validation-for="Color" class="text-danger"></span>
            </div>

            <!-- Es Tropical -->
            <div class="col-md-4 d-flex align-items-center">
                <div class="form-check mt-4">
                    <input asp-for="EsTropical" class="form-check-input" type="checkbox" />
                    <label asp-for="EsTropical" class="form-check-label">Es tropical</label>
                </div>
            </div>

            <!-- Imagen -->
            <div class="col-md-4">
                <label asp-for="Imagen" class="form-label">URL de la imagen</label>
                <input asp-for="Imagen" class="form-control" />
                <span asp-validation-for="Imagen" class="text-danger"></span>
            </div>

            <!-- Precio -->
            <div class="col-md-6">
                <label asp-for="Precio" class="form-label">Precio</label>
                <input asp-for="Precio" type="number" step="0.01" class="form-control" required />
                <span asp-validation-for="Precio" class="text-danger"></span>
            </div>

            <!-- Proveedor existente -->
            <div class="col-md-6">
                <label class="form-label">Proveedor existente (opcional)</label>
                <select asp-for="ProveedoresIdProveedor" class="form-select">
                    <option value="0">-- Seleccionar proveedor existente --</option>
                    @foreach (var p in proveedores)
                    {
                        <option value="@p.IdProveedor">@p.Nombre</option>
                    }
                </select>
                <small class="text-muted">
                    Opcional: selecciona un proveedor existente o crea uno nuevo abajo
                </small>
                <span asp-validation-for="ProveedoresIdProveedor" class="text-danger"></span>
            </div>

            <!-- Nuevo proveedor -->
            <div class="col-12">
                <label class="form-label">Crear nuevo proveedor (opcional)</label>
                <input type="text" name="nuevoProveedorNombre" 
                       placeholder="Nombre *" class="form-control mb-1" />
                <input type="text" name="nuevoProveedorDireccion" 
                       placeholder="Dirección" class="form-control mb-1" />
                <input type="text" name="nuevoProveedorTelefono" 
                       placeholder="Teléfono" class="form-control mb-1" />
                <input type="email" name="nuevoProveedorEmail" 
                       placeholder="Email" class="form-control" />
                <small class="text-muted">
                    Si completas el nombre, se creará un proveedor nuevo
                </small>
            </div>

            <!-- Botón submit y cancelar -->
            <div class="col-12 mt-3">
                <button type="submit" class="btn btn-success w-100">Añadir Fruta</button>
            </div>
            <div class="col-12 mt-2">
                <a asp-action="Index" class="btn btn-secondary w-100">Cancelar</a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}

<style>
    h2 { font-weight: bold; }
    .form-label { font-weight: 500; }
    .mb-1 { margin-bottom: .5rem; }
</style>
